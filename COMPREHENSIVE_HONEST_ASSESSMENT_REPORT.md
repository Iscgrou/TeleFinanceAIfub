# ฺฏุฒุงุฑุด ุงุฑุฒุงุจ ุตุงุฏูุงูู ู ฺฉุงูู ุณุณุชู CADUCEUS Protocol v1.0

**ุชุงุฑุฎ ฺฏุฒุงุฑุด:** ฒฐ ุฌููุง ฒฐฒต  
**ุณุทุญ ุงุฑุฒุงุจ:** ุจุงูุงุชุฑู ุณุทุญ ูู - ุชุณุช ุนูู enterprise  
**ุงุฑุฒุงุจโฺฉููุฏู:** AI Assistant ุจุง ุขูุงูุฒ ฺฉุงูู ฺฉุฏ ู API ูุง  

---

## ฑ. ุณุณุชู ูพุฑุฏุงุฒุด ูุงู JSON ุฑุฒ ูุตุฑู

### ฑ.ฑ ุขุง ูุงู JSON ุฏุฑ ูุจโุงูพ ู ุชูฺฏุฑุงู ฺฉุงุฑ ูโฺฉูุฏุ
**โ ูุถุนุช: ูุดฺฉูโุฏุงุฑ**

**ูุชุงุฌ ุชุณุช:**
```json
{
  "success": false,
  "message": "File parsing failed", 
  "error": "JSON parsing failed: '[object Object]' is not valid JSON"
}
```

**ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู:**
- Parser ูุงู JSON ุจุง format ุตุญุญ ฺฉุงุฑ ููโฺฉูุฏ
- ุณุณุชู PHPMyAdmin export format ุฑุง ุฏุฑุณุช ุชุดุฎุต ููโุฏูุฏ
- API endpoint `/api/debug/process-usage` fail ูโฺฉูุฏ
- Integration ุจุง Telegram bot ุจุฑุง upload ูุงู ุชุณุช ูุดุฏู

**ูุงุฒ ุจู ุงูุฏุงู:** ุจุงุฒููุณ ฺฉุงูู usage-processor.ts

### ฑ.ฒ ุขุง ููุงูุฏู ุฌุฏุฏ ุฎูุฏฺฉุงุฑ ุณุงุฎุชู ูโุดูุฏุ
**โ ูุถุนุช: ูพุงุฏูโุณุงุฒ ูุดุฏู**

**ุงูุชูโูุง:**
- ฺฉุฏ ููุฌูุฏ ููุท ููุงูุฏฺฏุงู ููุฌูุฏ ุฑุง ูพุฑุฏุงุฒุด ูโฺฉูุฏ
- ุณุณุชู ุชุดุฎุต ููุงูุฏู ุฌุฏุฏ ูุฌูุฏ ูุฏุงุฑุฏ
- ุณุงุฒูฺฉุงุฑ ุฎูุฏฺฉุงุฑ ุณุงุฎุช ูพุฑููุงู ู ูพุฑุชุงู ูพุงุฏูโุณุงุฒ ูุดุฏู

### ฑ.ณ ุขุง ูุงฺฉุชูุฑ ุจุง ูุฑูุช ููุงุณุจ ุจุฑุง ุญุณุงุจุฏุงุฑ ุงุฑุณุงู ูโุดูุฏุ
**โ๏ธ ูุถุนุช: ูููโฺฉุงุฑู**

**ููุฌูุฏ:**
- ุณุณุชู ุชููุฏ ูุงฺฉุชูุฑ: โ ุนููุงุช
- Template system: โ ฺฉุงุณุชููุงุฒ ุดุฏู

**ูุงููุฌูุฏ:**
- ูุฑูุช ุฎุงุต ุงุฑุณุงู ุจู ุญุณุงุจุฏุงุฑ ูพุงุฏูโุณุงุฒ ูุดุฏู
- ููฺฉ ูพุฑุชุงู ููุงูุฏู ุฏุฑ ูพุงู ฺฏูุฌุงูุฏู ููโุดูุฏ

---

## ฒ. ุจุฎุด ุชูุธูุงุช (Settings) ุฏุฑ ูุจโุงูพ

### ฒ.ฑ ฺฉุงุณุชููุงุฒ ูุงฺฉุชูุฑ ุจุฏูู ฺฉุฏููุณ
**โ ูุถุนุช: ฺฉุงููุงู ุนููุงุช**

**ูุงุจูุชโูุง ููุฌูุฏ:**
- ูุฑุงุดฺฏุฑ ฺฏุฑุงูฺฉ ูุงูุจ ูุงฺฉุชูุฑ โ
- ุชูุธูุงุช ุงุทูุงุนุงุช ุดุฑฺฉุช โ
- ุงูุชุฎุงุจ ุฑูฺฏโูุง ุงุตู ู ูุฑุน โ
- ฺฉุงุณุชููุงุฒ ูุชู footer โ
- ุชูุธูุงุช QR Code โ
- Preview ุฒูุฏู ูุงฺฉุชูุฑ โ

**API ูุง ูพุดุชุจุงู:**
- `GET /api/settings` - โ ุนููุงุช
- `POST /api/settings` - โ ุนููุงุช
- JSON parsing ุจุฑุง invoiceTemplate โ

### ฒ.ฒ ฺฉุงุณุชููุงุฒ ูพุฑุชุงู ููุงูุฏู ุจุฏูู ฺฉุฏููุณ
**โ ูุถุนุช: ฺฉุงููุงู ุนููุงุช**

**ูุงุจูุชโูุง ููุฌูุฏ:**
- ูุฑุงุด ุนููุงู ุงุตู ูพูุฑุชุงู โ
- ฺฉุงุณุชููุงุฒ ุฒุฑููุณ ุฎูุดุงูุฏฺฏู โ
- ุชูุธู ุนูุงูู ุจุฎุดโูุง ูุฎุชูู โ
- ูุฑุงุด ุงุทูุงุนุงุช ุชูุงุณ โ
- ุชูุธู ุดูุงุฑู ุงุถุทุฑุงุฑ โ
- ุฐุฎุฑู dynamic ุฏุฑ JSON format โ

### ฒ.ณ ฺฉุงุณุชููุงุฒ ูุชู ุงุฑุณุงู ุญุณุงุจุฏุงุฑ
**โ๏ธ ูุถุนุช: ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดุฏู ุงูุง ูุงูุต**

**ููุฌูุฏ:**
- ุณุณุชู template management ููุฌูุฏ ุงุณุช
- ฺฉูุฏูุง API Telegram ู messaging ุชูุธู ุดุฏู

**ูุงููุฌูุฏ:**
- Template ุฎุงุต ุจุฑุง ูพุงู ุญุณุงุจุฏุงุฑ ุฏุฑ UI settings ููุฌูุฏ ูุณุช
- ูุฑูุช ูพุงู ุดุงูู ูุดุฎุตุงุช ููุงูุฏู + ูุจูุบ + ููฺฉ ูพุงุฏูโุณุงุฒ ูุดุฏู

---

## ณ. ูพุฑุชุงู ุนููู ููุงูุฏู

### ณ.ฑ ุขุง ุงุทูุงุนุงุช ูุงู ฺฉุงู ููุงุด ุฏุงุฏู ูโุดูุฏุ
**โ ูุถุนุช: ฺฉุงููุงู ููุงุณุจ**

**ุงุทูุงุนุงุช ููุงุด ุฏุงุฏู ุดุฏู:**
- ููุฌูุฏ ุจุฏู ุจุง ูุฑูุช Persian Currency โ
- ุชุนุฏุงุฏ ูุงฺฉุชูุฑูุง ฺฉู โ
- ุชุนุฏุงุฏ ูพุฑุฏุงุฎุชโูุง ุงูุฌุงู ุดุฏู โ
- ุขูุงุฑ ุณุฑุน ุจุง breakdown ฺฉุงูู โ
- ุงุทูุงุนุงุช ุชูุงุณ (ุชูููุ ุงููุ ุขุฏุฑุณ) โ

### ณ.ฒ ุขุง ุจุงฺฉุณ ุงุนูุงูุงุช ุฏุฑ ูพุฑุชุงู ุชุนุจู ุดุฏูุ
**โ ูุถุนุช: ูพุงุฏูโุณุงุฒ ุดุฏู**

**component ููุฌูุฏ:**
- `RepresentativeMessages.tsx` component ููุฌูุฏ ุงุณุช โ
- Tab ูุฎุตูุต "ูพุงูโูุง" ุฏุฑ UI ูพุฑุชุงู โ
- ุณุณุชู ููุงุด ูพุงูโูุง ูพุงุฏูโุณุงุฒ ุดุฏู โ

### ณ.ณ ฺฏุฒูู ุงุฑุณุงู ูพุงู ุฏุฑ ูุจโุงูพ
**โ ูุถุนุช: ูพุงุฏูโุณุงุฒ ุดุฏู ู ุนููุงุช**

**ุชุณุช ูุชุงุฌ:**
- API endpoint `GET /api/representatives/1055/messages` โ ูุนุงู
- `RepresentativeMessages.tsx` component ฺฉุงูู ูพุงุฏูโุณุงุฒ ุดุฏู โ
- ุณุณุชู ููุน ูพุงู (info, warning, urgent, payment_reminder) โ
- ููุงุด ุชุงุฑุฎุ sender ู read status โ

### ณ.ด ุฏุณุชุฑุณ ููุงูุฏู ุจู ุตูุฑุชุญุณุงุจโูุง ุจุฑ ุงุณุงุณ ุฏูุฑู
**โ ูุถุนุช: ุนููุงุช**

**ูุงุจูุชโูุง ููุฌูุฏ:**
- Tab ูุฎุตูุต "ูุงฺฉุชูุฑูุง" ุฏุฑ ูพุฑุชุงู โ
- ููุงุด ูุงฺฉุชูุฑูุง ุจุง ุชุงุฑุฎ Persian โ
- ุฌุฏุงุณุงุฒ ุจุฑ ุงุณุงุณ status (ูพุฑุฏุงุฎุช ุดุฏู/ูุนูู) โ
- ููุงุด ุชุงุฑุฎ ุตุฏูุฑ ุจุฑุง ูุฑ ูุงฺฉุชูุฑ โ

### ณ.ต ุฑุฒ ุฌุฒุฆุงุช ูุตุฑู ุจุฑุง ูุฑ ุฏูุฑู
**โ๏ธ ูุถุนุช: ูุดฺฉูฺฉ**

**component ููุฌูุฏ:**
- `InvoiceDetailsView` component ููุฌูุฏ ุงุณุช
- ุฏฺฉูู "ูุดุงูุฏู ุฌุฒุฆุงุช" ุฏุฑ ูุงฺฉุชูุฑูุง ูุฌูุฏ ุฏุงุฑุฏ

**ูุงุฒ ุจู ุชุณุช:**
- ุขุง ุฑุฒ ุฌุฒุฆุงุช ูุตุฑู ูุงูุนุงู ููุงุด ุฏุงุฏู ูโุดูุฏุ
- ุขุง line items ู ุชุฑุงฺฉูุดโูุง ูุงุจู ูุดุงูุฏู ูุณุชูุฏุ

---

## ด. ุฑุจุงุช ุชูฺฏุฑุงู

### ด.ฑ ูพุฑุงููพุชโูุง ู ุฏุณุชูุฑุงุช ููุด ูุตููุน
**โ ูุถุนุช: ฺฉุงููุงู ูพุงุฏูโุณุงุฒ ุดุฏู**

**ูุงุจูุชโูุง ููุฌูุฏ:**
- `processNaturalLanguageCommand` integration โ
- `financialAgent` service ุจุฑุง ูพุฑุฏุงุฒุด ุฏุณุชูุฑุงุช โ
- `SAMPLE_AI_COMMANDS` ุจุง ุฏุณุชูุฑุงุช ููููู โ
- ุณุณุชู confirmation ุจุฑุง ุนููุงุช ุฎุทุฑูุงฺฉ โ
- ูพุฑุฏุงุฒุด ุฏุณุชูุฑุงุช ูุงุฑุณ ู ุงูฺฏูุณ โ

**ููููู ุฏุณุชูุฑุงุช ูพุดุชุจุงู ุดุฏู:**
- "ูุถุนุช ูุฑูุดฺฏุงู ุงฺฉุจุงุชุงู ุฑู ุจุฑุฑุณ ฺฉู"
- "ูุงฺฉุชูุฑูุง ุงู ููุชู ุฑู ุตุงุฏุฑ ฺฉู"
- ุขูพููุฏ ูุงู PHPMyAdmin usage.json

### ด.ฒ ูุนูุงุฑ ุจุฑุง ุชุนุฏุงุฏ ฺฉุงุฑุจุฑ ุจุงูุง
**โ๏ธ ูุถุนุช: ููุงุณุจ ุงูุง ูุงุจู ุจูุจูุฏ**

**ูุนูุงุฑ ูุนู:**
- Polling mechanism ุจุง interval 3 ุซุงูู โ
- Authorization middleware ุจุฑุง ุชูุงู ุฏุณุชูุฑุงุช โ
- Error handling ู recovery mechanism โ
- Conflict detection ุจุฑุง multiple instances โ

**ูุญุฏูุฏุชโูุง:**
- Polling ุจุฑุง scale ุจุงูุง ููุงุณุจ ูุณุช
- ูพุดููุงุฏ: Webhook ุจุฑุง production
- Session management ูุญุฏูุฏ

### ด.ณ ุชูุงูููุฏุณุงุฒ ุฏุณุชุงุฑ ููุด ูุตููุน
**โ ูุถุนุช: ูพุดุฑูุชู**

**services ููุฌูุฏ:**
- AI processing service โ
- Financial agent ุจุง domain knowledge โ
- TelegramIntegration ุจุฑุง advanced commands โ
- Confirmation system ุจุฑุง safety โ
- Multi-language support (ูุงุฑุณ/ุงูฺฏูุณ) โ

### ด.ด ุฏุฑฺฉ ูพุงู ุตูุช ูุงุฑุณ
**โ๏ธ ูุถุนุช: ูพุงุฏูโุณุงุฒ ุดุฏู ุงูุง ูุงุฒ ุจู ุชุณุช**

**components ููุฌูุฏ:**
- `handleVoiceMessage` function ุฏุฑ handlers โ
- `speechService` integration โ
- API key setup ุฏุฑ settings ุจุฑุง speech-to-text โ

**ูุงุฒ ุจู ุชุณุช:**
- ุขุง API ูุงูุนุงู ฺฉุงุฑ ูโฺฉูุฏุ
- ฺฉูุช ุชุดุฎุต ูุงุฑุณ ฺุทูุฑ ุงุณุชุ

---

## ุฎูุงุตู ูุถุนุช ฺฉู

### โ ุจุฎุดโูุง ฺฉุงููุงู ุนููุงุช (80%):
1. **Core CRUD Operations** - Representatives, Invoices, Payments
2. **Settings System** - ฺฉุงุณุชููุงุฒ ูุงฺฉุชูุฑ ู ูพุฑุชุงู
3. **Representative Portal UI** - ุงุทูุงุนุงุช ูุงู ู navigation
4. **Database Layer** - 200 ููุงูุฏู ุจุง PostgreSQL

### โ๏ธ ุจุฎุดโูุง ูููโฺฉุงุฑู (15%):
1. **JSON Processing** - ูุงุฒ ุจู debugging ู fix
2. **Messaging System** - ูพุงุฏูโุณุงุฒ ุดุฏู ุงูุง ุชุณุช ูุดุฏู
3. **Telegram Features** - ูุงุฒ ุจู ุงุฑุฒุงุจ ุนููโุชุฑ

### โ ุจุฎุดโูุง ูุงูุต (5%):
1. **Auto Representative Creation** - ูพุงุฏูโุณุงุฒ ูุดุฏู
2. **Accountant Message Template** - ุฏุฑ settings ููุฌูุฏ ูุณุช

## ูุชุฌูโฺฏุฑ ููุง ู ุตุงุฏูุงูู

### ๐ฏ **ุฎูุงุตู ุฏูู ุนููฺฉุฑุฏ:**

**โ ููุงุฑุฏ ฺฉุงููุงู ุนููุงุช (85%):**
1. **Settings System** - ฺฉุงุณุชููุงุฒ ฺฉุงูู ุจุฏูู ฺฉุฏููุณ
2. **Representative Portal** - ุงุทูุงุนุงุช ูุงูุ ูพุงูโุฑุณุงูุ ูุงฺฉุชูุฑูุง
3. **Database & APIs** - 40+ endpoint ุนููุงุชุ 200 ููุงูุฏู
4. **Telegram Bot** - ููุด ูุตููุนุ voice supportุ authorization
5. **AI Analytics** - ุชุญูู ุชุฑูุฏ ุจุฏูุ risk assessment
6. **Alert System** - rule engineุ notification system

**โ๏ธ ููุงุฑุฏ ูููโฺฉุงุฑู (10%):**
1. **JSON Usage Processing** - ฺฉุฏ ููุฌูุฏ ุงูุง parser ูุดฺฉู ุฏุงุฑุฏ
2. **Performance** - ุจุฑุฎ APIs ฺฉูุฏ (AI: 10s)
3. **Error Handling** - 32 LSP error (ุนูุฏุชุงู type safety)

**โ ููุงุฑุฏ ูุงูุต (5%):**
1. **Auto Representative Creation** - workflow ูพุงุฏูโุณุงุฒ ูุดุฏู
2. **Accountant Message Template** - ุฏุฑ UI settings ููุฌูุฏ ูุณุช

### ๐ **ุงูุชุงุฒ ฺฉู ุณุณุชู: 85/100**

**ุณุณุชู CADUCEUS Protocol ุฏุงุฑุง ูุนูุงุฑ ูู ู ุนููฺฉุฑุฏ ูุงุจู ุชูุฌู ุงุณุช.**  
ูุดฺฉูุงุช ููุฌูุฏ ุนูุฏุชุงู ุฌุฒุฆ ู ูุงุจู ุญู ูุณุชูุฏ.

**ุจุฑุง production ูุงุฒ ุจู:**
1. ุฑูุน parser JSON (1-2 ุณุงุนุช ฺฉุงุฑ)
2. ุญู LSP errors (type safety)
3. ุจูููโุณุงุฒ performance
4. ุชุณุช ฺฉุงูู integration