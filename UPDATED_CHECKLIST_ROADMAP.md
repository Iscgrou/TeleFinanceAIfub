# چک‌لیست و نقشه راه بروزرسانی شده - 20 جولای 2025

## 🎯 وضعیت کلی: **فاز 1 کامل شد - آماده برای فاز 2**

---

## ✅ **فاز 1: CRUD عملیات اصلی (کامل شده)**

### عملیات نمایندگان
- [x] افزودن نماینده جدید 
- [x] ویرایش اطلاعات نماینده
- [x] حذف نماینده
- [x] افزایش بدهی نماینده
- [x] کاهش بدهی نماینده
- [x] مهاجرت داده‌های قدیمی (199 نماینده بروزرسانی شد)

### عملیات همکاران فروش
- [x] افزودن همکار فروش جدید
- [x] ویرایش اطلاعات همکار فروش
- [x] حذف همکار فروش
- [x] تخصیص تصادفی به نمایندگان

### عملیات فاکتورها
- [x] ایجاد فاکتور جدید
- [x] مشاهده لیست فاکتورها
- [x] مشاهده جزئیات فاکتور
- [x] تولید تصویر PNG فاکتور

### رفع مشکلات فنی
- [x] خطای JSON parsing در apiRequest
- [x] مشکل PUT/PATCH در فرم‌ها
- [x] هماهنگی schema backend/frontend
- [x] تنظیم همکار فروش پیش‌فرض

---

## 🚨 **فاز 2: رفع مشکلات بحرانی (اولویت فوری)**

### 2.1 رفع مشکل پورتال عمومی نماینده
**اولویت: بحرانی**
- [ ] رفع خطای "صفحه در دسترس نیست" در مرورگرهای مختلف
- [ ] رفع خطای "نماینده مورد نظر یافت نشد"
- [ ] تست و اطمینان از کارکرد در Safari، Chrome، Firefox
- [ ] بررسی و رفع مشکلات CORS و routing

---

## 🔄 **فاز 3: صفحه تنظیمات کامل**

### 3.1 تنظیمات قالب فاکتور
**اولویت: بالا**
- [ ] ویرایشگر گرافیکی قالب فاکتور (بدون نیاز به کدنویسی)
- [ ] تنظیم عنوان، لوگو، رنگ‌ها
- [ ] ویرایش متون header و footer
- [ ] پیش‌نمایش زنده تغییرات
- [ ] اعمال تغییرات بر روی همه فاکتورها (قدیم و جدید)

### 3.2 تنظیمات پورتال عمومی نماینده  
**اولویت: بالا**
- [ ] ویرایشگر گرافیکی ظاهر پورتال
- [ ] تنظیم رنگ‌ها، فونت‌ها، لوگو
- [ ] ویرایش تمام متون و عناوین
- [ ] تنظیم نحوه نمایش ریز جزئیات فاکتور
- [ ] اعمال تغییرات به صورت real-time

### 3.3 پردازش فایل Marzban
**اولویت: بالا**
- [ ] آپلود فایل JSON usage
- [ ] تحلیل مصرف هر نماینده
- [ ] محاسبه خودکار بر اساس تعرفه
- [ ] صدور فاکتور خودکار

### 3.4 واردات دسته‌جمعی نمایندگان
**اولویت: متوسط**
- [ ] آپلود فایل JSON/CSV
- [ ] نمایش پیش‌نمایش داده‌ها
- [ ] تایید و واردات

### 3.5 بازنشانی (حذف داده‌ها)
**اولویت: متوسط**
- [ ] نمایش لیست دسته‌بندی داده‌ها
- [ ] انتخاب دسته‌های مورد نظر برای حذف
- [ ] تایید دو مرحله‌ای برای امنیت
- [ ] حذف انتخابی: نمایندگان، فاکتورها، پرداخت‌ها، همکاران فروش

---

## 🔄 **فاز 4: پورتال عمومی نماینده (بهبود شده)**

### 4.1 قابلیت‌های اصلی پورتال
**اولویت: بالا**
- [ ] لیست فاکتورها با تاریخ شمسی
- [ ] دکمه نمایش ریز جزئیات هر فاکتور
- [ ] نمایش میزان بدهی/بستانکاری کل
- [ ] تعداد فاکتورهای معوق
- [ ] جدول پرداخت‌های انجام شده
- [ ] نمایش پیام‌های ارسالی از پنل ادمین

### 4.2 سیستم پیام‌رسانی به نماینده
**اولویت: متوسط**
- [ ] ارسال پیام از پروفایل نماینده در پنل ادمین
- [ ] نمایش پیام در کادر مشخص در پورتال نماینده
- [ ] امکان حذف پیام از پنل ادمین
- [ ] بروزرسانی real-time پیام‌ها

---

## 🔄 **فاز 5: جستجوی سراسری**

### 5.1 جستجوی سریع
**اولویت: متوسط**
- [ ] کادر جستجو در sidebar
- [ ] جستجو در نمایندگان (نام، کد، یوزرنیم)
- [ ] جستجو در فاکتورها (شماره، مبلغ)
- [ ] جستجو در همکاران فروش
- [ ] نتایج زنده و دسته‌بندی شده

---

## 🔄 **فاز 6: گزارشات و تحلیلات**

### 6.1 صفحه گزارش‌ها
- [ ] گزارش سنی بدهی‌ها (AR Aging)
- [ ] گزارش کمیسیون همکاران فروش
- [ ] گزارش عملکرد نمایندگان
- [ ] خروجی CSV/PDF

### 6.2 بهبود داشبورد
- [ ] نمودار فروش ماهانه
- [ ] نمایندگان برتر ماه
- [ ] فاکتورهای سررسید گذشته
- [ ] فعالیت‌های اخیر

---

## 🔄 **فاز 7: مدیریت پیشرفته**

### 7.1 مدیریت پرداخت‌ها
- [ ] ثبت پرداخت جدید
- [ ] تخصیص پرداخت به فاکتورها
- [ ] دفتر حساب (Ledger) برای هر نماینده

### 7.2 ردگیری تغییرات
- [ ] ثبت خودکار تمام عملیات
- [ ] جدول فعالیت‌های سیستم
- [ ] فیلتر بر اساس کاربر/تاریخ/نوع عملیات

---

## 🔄 **فاز 8: تکمیل UI/UX**

### 8.1 رابط کاربری
- [ ] حالت تاریک (Dark Mode) کامل
- [ ] نمای کارتی برای نمایندگان
- [ ] انیمیشن‌های ملایم
- [ ] بهبود responsive design

### 8.2 پیشرفته‌های عملیاتی
- [ ] دستیار هوش مصنوعی (Chat Bot)
- [ ] اعلان‌های real-time
- [ ] یادآورهای خودکار

---

## 📊 **آمار فعلی سیستم:**
- ✅ **200 نماینده** (همه با پروفایل کامل)
- ✅ **2 همکار فروش** فعال
- ✅ **صفر فاکتور** معوقه فعلی
- ✅ **تمام عملیات CRUD** کار می‌کند
- ❌ **پورتال عمومی** در مرورگرهای دیگر کار نمی‌کند

---

## 🎯 **اولویت‌بندی نهایی:**

### **🚨 اولویت بحرانی:**
1. **رفع مشکل پورتال عمومی** - عدم دسترسی در مرورگرهای مختلف

### **🔥 اولویت فوری:**
2. **صفحه تنظیمات کامل** - ویرایش قالب‌ها و پردازش فایل Marzban
3. **بهبود پورتال نماینده** - نمایش ریز جزئیات و پیام‌رسانی

### **⚡ اولویت متوسط:**
4. **جستجوی سراسری** - بهبود کاربری
5. **گزارشات** - تصمیم‌گیری مدیریتی

### **📊 اولویت پایین:**
6. **مدیریت پیشرفته** - پرداخت‌ها و ردگیری
7. **UI/UX پیشرفته** - بهبود تجربه کاربری

---

**منتظر دستور شما برای شروع از اولویت بحرانی (رفع مشکل پورتال عمومی) هستم.**